This SMOTE code is off this pseudocode from Neural network-based undersampling techniques
